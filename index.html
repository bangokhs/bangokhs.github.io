<script>
    // JavaScript: ìŠ¬ë¡¯ë¨¸ì‹  ë¡œì§ (ë²„ê·¸ ìˆ˜ì • ë° ì•ˆì •í™” ë²„ì „)
    
    // --- 1. ì„¤ì • ë° ë³€ìˆ˜ ---
    
    // ì‹¬ë³¼ê³¼ í™•ë¥  ì •ì˜
    const probabilities = [
        { symbol: 'ğŸ’', weight: 40 }, 
        { symbol: 'ğŸ‹', weight: 30 },
        { symbol: 'ğŸ””', weight: 20 },
        { symbol: 'â­', weight: 7 }, 
        { symbol: '7ï¸âƒ£', weight: 3 }  
    ];
    
    // ì­íŒŸ ë°°ìœ¨
    const payouts = {
        'ğŸ’': 10,
        'ğŸ‹': 20,
        'ğŸ””': 50,
        'â­': 100,
        '7ï¸âƒ£': 500
    };
    
    const partialMatchPayout = 3; 
    const INITIAL_BALANCE = 100; 
    
    let coinBalance; // loadBalanceì—ì„œ ì´ˆê¸°í™”ë¨
    const betAmount = 10;
    const REEL_STOP_INTERVAL = 1000; 
    const SPIN_DURATION = 3000; 
    const STORAGE_KEY = 'slotMachineCoinBalance'; 

    // DOM ìš”ì†Œ
    const reelElements = [
        document.getElementById('reel1'),
        document.getElementById('reel2'),
        document.getElementById('reel3')
    ];
    const spinButton = document.getElementById('spinButton');
    const resultDisplay = document.getElementById('result');
    const balanceDisplay = document.getElementById('coinBalanceDisplay');

    // --- 2. ë¡œì»¬ ì €ì¥ì†Œ ë° ì”ì•¡ ê´€ë¦¬ ---

    function saveBalance() {
        localStorage.setItem(STORAGE_KEY, coinBalance.toString()); // ë¬¸ìì—´ë¡œ ì €ì¥
    }

    function loadBalance() {
        const savedBalance = localStorage.getItem(STORAGE_KEY);
        // ì €ì¥ëœ ê°’ì´ ìœ íš¨í•˜ì§€ ì•Šê±°ë‚˜ 0ë³´ë‹¤ ì‘ìœ¼ë©´ ì´ˆê¸°ê°’ìœ¼ë¡œ ì„¤ì •
        if (savedBalance === null || isNaN(parseInt(savedBalance)) || parseInt(savedBalance) < 0) {
            coinBalance = INITIAL_BALANCE;
        } else {
            coinBalance = parseInt(savedBalance);
        }
        updateBalanceDisplay();
    }

    // ì”ì•¡ í‘œì‹œ ë° ë²„íŠ¼ ìƒíƒœ ì—…ë°ì´íŠ¸ (ë²„ê·¸ ë°©ì§€ ë¡œì§ ì¶”ê°€)
    function updateBalanceDisplay() {
        balanceDisplay.textContent = coinBalance;
        saveBalance(); 

        // ì”ì•¡ì´ ë°°íŒ… ê¸ˆì•¡ë³´ë‹¤ ì ìœ¼ë©´ ë²„íŠ¼ ë¹„í™œì„±í™” (ë²„ê·¸ ë°©ì§€)
        if (coinBalance < betAmount) {
            spinButton.disabled = true;
            resultDisplay.textContent = "ì½”ì¸ ë¶€ì¡±! ë‹¤ì‹œ ì‹œì‘
